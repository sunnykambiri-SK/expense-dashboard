function renderTrend(expenses) {
  const container = document.getElementById('trend-chart');
  container.innerHTML = '';

  const today = new Date();
  today.setHours(0, 0, 0, 0);

  // Sum totals per day
  const totalsByDay = {};
  expenses.forEach(e => {
    const d = new Date(e.dateISO || e.date);
    d.setHours(0, 0, 0, 0);
    const key = d.toISOString().slice(0, 10);
    totalsByDay[key] = (totalsByDay[key] || 0) + e.amount;
  });

  // Build 10-day window
  const dayInfos = [];
  for (let i = 9; i >= 0; i--) {
    const d = new Date(today);
    d.setDate(d.getDate() - i);
    const key = d.toISOString().slice(0, 10);
    const total = totalsByDay[key] || 0;
    const label = String(d.getDate()).padStart(2, '0') + '/' + String(d.getMonth() + 1).padStart(2, '0');
    dayInfos.push({ key, total, label });
  }

  const maxVal = Math.max(...dayInfos.map(d => d.total), 1);

  dayInfos.forEach(info => {
    const val = info.total;
    const pct = maxVal === 0 ? 0 : (val / maxVal) * 90; // up to 90% height
    const over = val > DAILY_LIMIT;
    const colorClass = over ? 'bg-red-500' : 'bg-indigo-500';

    const wrap = document.createElement('div');
    wrap.className = 'flex flex-col items-center justify-end flex-1 h-full';

    // --- New Vertical Top Label (Option A) ---
    const valueLabel = document.createElement('div');
    valueLabel.className = 'text-[10px] text-slate-600 mb-1';
    valueLabel.style.transform = 'rotate(-90deg)';
    valueLabel.style.whiteSpace = 'nowrap';
    valueLabel.textContent = val ? val.toLocaleString('en-IN') : '';
    wrap.appendChild(valueLabel);

    // --- Column ---
    const columnArea = document.createElement('div');
    columnArea.className = 'flex-1 flex items-end w-full justify-center';

    const colOuter = document.createElement('div');
    colOuter.className = 'w-[60%] h-full flex items-end justify-center';

    const col = document.createElement('div');
    col.className = 'w-full rounded-t ' + colorClass;
    col.style.height = pct + '%';

    colOuter.appendChild(col);
    columnArea.appendChild(colOuter);
    wrap.appendChild(columnArea);

    // --- Date Label ---
    const dateLabel = document.createElement('div');
    dateLabel.className = 'h-5 flex items-center justify-center';
    dateLabel.textContent = info.label;
    dateLabel.classList.add('text-[10px]', 'text-slate-500');

    wrap.appendChild(dateLabel);
    container.appendChild(wrap);
  });
}
